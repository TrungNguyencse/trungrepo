!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=require("electron")},function(e,t,r){!function(){"use strict";if("undefined"!=typeof process){var e=r(0),t=e.ipcRenderer,o=!!e&&!!e.features&&!!e.features.webviews,s=!!e&&!!e.features&&!!e.features.figma,n={},i=30*Math.PI,a=s?"subscribe-to-imports":"subscribe-to-exports",d=s?"imports-change":"exports-change",c=s?"imports-started":"exports-started",p=s?"clear-imports":"clear-exports",l=s?"retry-import":"retry-export",u=s?"cancel-import":"cancel-export",g="retry-getting-project",m=document.getElementById("importProgresses"),f=document.getElementById("importProgressTemplate"),h=document.getElementById("importProgressProjectGroupTemplate"),y=document.getElementById("importSource"),I=document.getElementById("importDestination"),P=document.getElementById("importProgressesButton"),L=document.getElementById("importProgressesContainer"),E=document.getElementById("clearImportProgresses"),v=document.getElementById("importsProgressBar"),O=document.getElementById("notificationContainer"),j=document.getElementById("userMenu");t.on(c,function(){O.classList.add("hidden"),j.classList.add("hidden"),P.classList.remove("hidden"),o?(t.once("active",function(e,t){L.classList.toggle("hidden",!t)}),t.sendToHost("active")):L.classList.remove("hidden")}),L.addEventListener("click",function(e){e.stopPropagation();var r=e.target.closest(".importProgress");r&&(r.classList.contains("importProgressDone")?function(e,t){A(),location.assign("/project/"+e+"/screen/"+t)}(r.dataset.projectId,r.dataset.screenId):e.target.classList.contains("retryImport")?function(e){t.send(l,e)}(e.target.parentElement.dataset.screenImportId):e.target.classList.contains("cancelImport")?function(e){t.send(u,e)}(e.target.parentElement.dataset.screenImportId):e.target.classList.contains("retryFetchProject")&&function(e){t.send(g,e)}(e.target.parentElement.parentElement.dataset.screenImportId))}),P.addEventListener("click",function(e){e.stopPropagation(),O.classList.add("hidden"),j.classList.add("hidden"),L.classList.toggle("hidden")}),m.addEventListener("transitionend",function(e){if(e.target.id===m.id&&"height"===e.propertyName){var t=m.querySelectorAll(".importProgress"),r=L.querySelectorAll(".importProgress.importProgressDone, .importProgress.importProgressFailed");t.length===r.length&&L.classList.add("hidden"),B()}}),E.addEventListener("click",function(e){e.preventDefault();var r=L.querySelectorAll(".importProgress.importProgressDone, .importProgress.importProgressFailed");r.length>0&&t.removeAllListeners(d);var o=0;function s(e){"height"===e.propertyName&&e.target.remove()}m.style.height=m.clientHeight+"px";for(var n=0,i=r.length-1;i>-1;i--){var a=r[i];n+=a.getBoundingClientRect().height,a.style.height=a.getBoundingClientRect().height+"px",a.addEventListener("transitionend",s),a.style.transitionDelay=o+"ms",a.classList.add("clearImportProgress"),o+=80}var c=o-80;m.style.transitionDuration=c+200+150+"ms",m.style.height=m.clientHeight-n+"px",t.send(p)}),document.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&A()}),document.addEventListener("keydown",function(e){e.keyCode===Zeplin.KEY_CODE.ESC&&A()}),B(),Array.from(document.querySelectorAll("#importProgressesButton circle")).forEach(function(e){e.setAttribute("r",15)}),v.setAttribute("stroke-dasharray","0 "+i),window.ImportProgresses={hideImportProgressesContainer:A}}function x(e){return e.progress.isApiOperationCompleted?100:Math.floor(e.progress.countOfUploadedImages/(e.progress.countOfImagesToUpload+1)*100)}function C(e){return function(t){var r=document.importNode(f.content,!0),o=r.querySelector(".importProgress");o.dataset.screenImportId=t._id,!function(e){return e.isGettingProject&&!e.isGettingProjectFailed}(t.progress)?!function(e){return e.isGettingProject&&e.isGettingProjectFailed}(t.progress)?(o.dataset.projectId=t.project._id,o.dataset.screenId=t.screen._id,t.progress.update?o.classList.add("updateScreen"):o.classList.add("newScreen"),r.querySelector(".screenName").textContent=t.screen.name,t.progress.isApiOperationFailed?r.querySelector(".importProgressBar").style.width="0%":r.querySelector(".importProgressBar").style.width=x(t)+"%",!function(e){return e.countOfUploadedImages===e.countOfImagesToUpload&&e.isApiOperationCompleted&&!e.isApiOperationFailed}(t.progress)?!function(e){return e.isApiOperationFailed}(t.progress)?!function(e){return e.countOfUploadedImages===e.countOfImagesToUpload&&!e.isApiOperationCompleted}(t.progress)?function(e){return e.countOfUploadedImages<e.countOfImagesToUpload&&!e.isApiOperationCompleted}(t.progress)&&(o.classList.add("uploadingImagesStep"),r.querySelector(".uploadedImages").textContent=t.progress.countOfUploadedImages,r.querySelector(".allImages").textContent=t.progress.countOfImagesToUpload):o.classList.add("ticklingTheBackendStep"):(o.classList.add("importProgressFailed"),t.progress.apiOperationFailedError&&t.progress.apiOperationFailedError.message&&(o.querySelector(".failed").textContent=t.progress.apiOperationFailedError.message,o.querySelector(".failed").title=t.progress.apiOperationFailedError.message)):(n[t._id]||(n[t._id]=function(){switch(Math.floor(100*Math.random())){case 0:return"message1";case 1:case 2:return"message2";case 3:case 4:return"message3";default:return"message4"}}()),o.classList.add(n[t._id]),o.classList.add("importProgressDone"))):o.classList.add("gettingProjectFailed"):o.classList.add("gettingProject"),e?e.appendChild(r):document.querySelector('.importProgressProjectGroup[data-pid="'+t.project._id+'"] .importProgressesOfProject').appendChild(r)}}function S(e){var t=document.importNode(h.content,!0);t.querySelector(".projectInformation").textContent=e.name+", "+e.type,t.querySelector(".importProgressProjectGroup").dataset.pid=e._id,m.appendChild(t)}function F(e,t){if(0===t.length)return P.classList.add("hidden"),void L.classList.add("hidden");m.style.height="auto",P.classList.remove("hidden"),m.innerHTML="";var r=t.reduce(function(e,t,r){return{projects:e.projects.find(function(e){return e._id===t.project._id})?e.projects:e.projects.concat(t.project),progress:Math.floor((e.progress*r+x(t))/(r+1)),anyImportFailed:e.anyImportFailed||!!t.progress.isApiOperationFailed}},{projects:[],progress:0,anyImportFailed:!1}),o=r.projects,s=r.progress;v.setAttribute("stroke-dasharray",i*s/100+" "+i*(100-s)/100),P.classList.toggle("importsDone",s>=100),P.classList.toggle("importsFailed",r.anyImportFailed),t[0].source&&(y.textContent=t[0].source),1===o.length?(I.textContent=o[0].name,t.forEach(C(m))):(I.textContent="Zeplin",o.forEach(S),t.forEach(C()))}function B(){t.on(d,F),t.send(a)}function A(){L.classList.add("hidden")}}()}]);
//# sourceMappingURL=maps/importProgresses.map.js